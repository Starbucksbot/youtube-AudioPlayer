// Vars
@import url('https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700');
$player_bg: #3a4e47;
$player_width: 380px;
$player_radius: 6px;
$player_top_height: 70px;
$player_bottom_height: 190px;
$player_cube_height: 380px;
$player_height: $player_top_height + $player_bottom_height + $player_cube_height;
$global_perspective: 800px;
$transition_time: 300ms 200ms;
$tilt_angle: 30deg;

$face_bg: pink;
$bright-green: #00ff00;
$mountain-bg: url('https://wallpapers.com/images/featured/mountains-sunset-oly4p350y8tjfw8a.jpg');

// Styles

.shadow_right {
  width: 90px;
  height: $player_cube_height;
  transition: all $transition_time;
  top: 0px;
  position: absolute;
  pointer-events: none;
  box-shadow: 0px 0px 0px #303f45 inset;
}

i {
  transition: all .3s;
  cursor: pointer;

  &:hover {
    color: #44f5b7;
  }
}

.shadow_left {
  width: 90px;
  height: $player_cube_height;
  transition: all $transition_time;
  top: 0px;
  position: absolute;
  right: 0;
  pointer-events: none;
  box-shadow: 0px 0px 0px #303f45 inset;
}

.r_trim {
  width: 260px;
  height: $player_height + 100px;
  position: absolute;
  left: $player_width;
  z-index: 2;
  top: -82px;
  margin: auto;
  background: #4cb892;
}

.l_trim {
  width: 260px;
  height: $player_height + 100px;
  position: absolute;
  z-index: 2;
  left: -640px;
  top: -33px;
  margin: auto;
  background: #4cb892;
}

body {
  font-family: 'Open Sans', sans-serif;
  background: $mountain-bg no-repeat center center fixed;
  background-size: cover;

  &::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(10, 10, 15, 0.85);
    z-index: -1;
  }
}

%center {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  left: 0;
  right: 0;
  margin: auto;
}

%face {
  width: $player_width;
  height: $player_width;
  background: $face_bg;
  position: absolute;
  transform-style: preserve-3D;
}

@mixin traverse($n, $x, $y, $ox, $oy, $oz, $l, $r, $to, $b, $w, $h) {
  $t: '';

  & .trigger--#{$n} {
    @extend %trigger;
    left: $l;
    right: $r;
    top: $to;
    bottom: $b;
    width: $w;
    height: $h;

    @for $i from 1 through ($n) {
      $t: $t + 'input +';
    }

    &:checked {
      & + #{$t} .cube {
        transform: translateY(-50%) rotateX($x) rotateY($y);
        transform-origin: $ox $oy $oz;
        transition: transform $transition_time, transform-origin 0s;
      }
    }
  }
}

.player {
  &_inner {
    @extend %center;
    background: $player_bg;
    width: $player_width;
    height: $player_height;
    border-radius: $player_radius;
    perspective: $global_perspective;
    box-shadow: 0px 0px 12px #255645;

    &__top {
      height: $player_top_height;
      padding: 24px;
      background: #4cb892;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;

      .t_left {
        width: 25%;
        float: left;
        i {
          font-size: 20px;
        }
      }

      .t_mid {
        float: left;
        text-align: center;
        width: 50%;
        input#searchInput {
          width: 100%;
          padding: 8px;
          border: none;
          border-radius: 4px;
          font-size: 14px;
          background: rgba(255, 255, 255, 0.1);
          color: #ffffff;
          outline: none;
          &::placeholder {
            color: #ccc;
          }
        }
      }

      .t_right {
        float: right;
        width: 25%;
        text-align: right;
        i {
          font-size: 20px;
        }
      }
    }

    &__middle {
      position: relative;
      height: $player_cube_height;
      background: #40555f;
      box-shadow: 0px 0px 110px #181f23 inset;

      input {
        -webkit-appearance: none;
        -moz-appearance: none;
        background: transparent;
        outline: none;
        width: 60px;
        height: 50px;
        position: absolute;
        cursor: pointer;
        transition: all .3s;

        &:hover {
          background: rgba(0, 0, 0, 0.4);
        }

        &:nth-of-type(1) {
          width: 130px;
          top: 40px;
          height: $player_cube_height - 80px;
          &:hover {
            background: none;
          }
          &::after {
            content: 'Now Playing';
            font-family: 'Open Sans', sans-serif;
            color: #ffffff;
            font-size: 13px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
          }
        }

        &:nth-of-type(2),
        &:nth-of-type(3),
        &:nth-of-type(4) {
          display: none; // Remove triggers for simplicity
        }
      }

      %trigger {
        background: black;
        width: 20px;
        height: $player_cube_height;
        position: absolute;
        z-index: 2;
        margin: auto;
        text-align: center;

        &::after {
          position: relative;
          top: 18px;
          left: -6px;
          transition: all .3s;
        }
      }

      @include traverse(1, 0, $tilt_angle, 200px, 0px, -200px, 0px, auto, 0, 0, 20px, 40px);
      @include traverse(2, 0, -$tilt_angle, 200px, 0px, -200px, auto, 0px, 0, 0, 20px, 40px);
      @include traverse(3, -0, 0, 200px, 200px, -200px, 0, 0, 0px, auto, 40px, 20px);
      @include traverse(4, -0, 0, 200px, 200px, -200px, 0, 0, 0px, auto, 40px, 20px);

      & .cube {
        @extend %center;
        top: $player_bottom_height;
        height: $player_cube_height;
        transform-style: preserve-3D;
        perspective-origin: ($player_cube_height / 2) ($player_cube_height / 2);
        transition: all $transition_time cubic-bezier(0.1, 1.94, 0.32, 1.02), transform-origin 0ms;

        &_inner {
          height: $player_cube_height;
          transform-style: preserve-3D;

          & > div {
            @extend %face;

            @for $i from 1 through 4 {
              &:nth-of-type(#{$i}) {
                background: darken($face_bg, 2 * $i);
              }
            }

            &__front {
              background: #40555f;
              position: relative;
              .details {
                position: absolute;
                width: 100%;
                top: 50%;
                transform: translateY(-50%);
                text-align: center;
                color: #ffffff;

                .details_album {
                  width: 90px;
                  height: 90px;
                  background: url('https://via.placeholder.com/100') no-repeat center;
                  background-size: cover;
                  border-radius: 4px;
                  margin: 0 auto 15px;
                }

                .track-info {
                  font-size: 14px;
                  margin-bottom: 10px;
                }
              }

              .replay-btn {
                padding: 8px 16px;
                background: #666;
                color: #ffffff;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-size: 12px;
                transition: background 0.3s ease;

                &.active,
                &.recently-played {
                  background: $bright-green;
                }
              }
            }

            &__left {
              background: #354752;
              transform: rotateY(90deg);
              transform-origin: 0 0;

              .options {
                position: absolute;
                left: 150px;
                top: 60px;
                transform: rotateY(254deg) translateZ(57px);

                ul#recent-songs {
                  list-style: none;
                  padding: 0;

                  li {
                    color: $bright-green;
                    cursor: pointer;
                    font-size: 12px;
                    margin: 8px 0;
                    word-wrap: break-word;
                    transition: color 0.3s ease;

                    &:hover {
                      color: lighten($bright-green, 30%);
                    }
                  }
                }
              }
            }

            &__right {
              background: #354752;
              transform: rotateY(-90deg);
              transform-origin: $player_cube_height 0;

              .volume {
                position: absolute;
                left: 210px;
                top: 60px;

                .volume_pip {
                  width: 40px;
                  height: 6px;
                  margin-bottom: 10px;
                  background: rgba(255, 255, 255, 0.2);
                  display: block;

                  &:nth-of-type(14),
                  &:nth-of-type(13),
                  &:nth-of-type(12),
                  &:nth-of-type(11) {
                    background: #44f5b7;
                  }

                  &:nth-of-type(10),
                  &:nth-of-type(9),
                  &:nth-of-type(8),
                  &:nth-of-type(7) {
                    background: #f5c844;
                  }

                  &:nth-of-type(6),
                  &:nth-of-type(5) {
                    background: #f54444;
                  }
                }

                #next-song {
                  color: #ffffff;
                  font-size: 12px;
                  padding: 8px;
                  background: rgba($neon-cyan, 0.05);
                  border-radius: 4px;
                  margin-top: 10px;
                  display: block;
                }
              }
            }
          }
        }
      }

      &__bottom {
        height: $player_bottom_height;
        padding: 30px;

        .options {
          text-align: center;
          color: #ffffff;
          font-size: 12px;
          margin-bottom: 20px;

          i {
            padding: 5px;

            &:nth-of-type(1) {
              color: #44f5b7;
            }

            &:nth-of-type(2) {
              opacity: 0.4;
            }
          }
        }

        .playbar {
          width: 100%;
          background: #2c3e38;
          height: 4px;
          position: relative;
          border-radius: 10px;

          &_inner {
            position: absolute;
            width: 40%;
            height: 100%;
            border-radius: 10px;
            background: #44f5b7;
          }

          &_left {
            float: left;
            position: relative;
            top: 8px;

            span {
              color: #ffffff;
              font-size: 10px;
            }
          }

          &_right {
            position: relative;
            top: 8px;
            float: right;

            span {
              color: #ffffff;
              font-size: 10px;
            }
          }
        }

        .controls {
          clear: left;
          margin-top: 26px;

          &_left {
            float: left;
            width: 30%;
            text-align: right;
            font-size: 20px;
            color: #ffffff;
            position: relative;
            top: 20px;
          }

          &_middle {
            float: left;
            width: 40%;
            font-size: 50px;
            color: #ffffff;
            text-align: center;
          }

          &_right {
            float: right;
            position: relative;
            top: 20px;
            width: 30%;
            font-size: 20px;
            color: #ffffff;
            text-align: left;
          }
        }
      }
    }
  }
}

audio {
  width: 100%;
  margin: 20px 0;
  background: transparent;
  border: none;
}